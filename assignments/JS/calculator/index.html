<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Style Link -->
    <link rel="stylesheet" href="assets/style.css">

    <!-- Normalize CSS File -->
    <link rel="stylesheet" href="assets/normalize.css">

    <!-- Google fonts link -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400&display=swap" rel="stylesheet">

    <title>Calculator</title>
</head>
<body>
<div class="calculator">
    <div class="display">
        <input type="text" placeholder="0" id="input" disabled>
    </div>
    <div class="button">
        <!-- Full erase -->
        <input type="button" value="AC" id="clear">

        <!-- Single erase -->
        <input type="button" value="DEL" id="erase">

        <input type="button" value="/" class="input-btn">
        <input type="button" value="*" class="input-btn">
        <input type="button" value="7" class="input-btn">
        <input type="button" value="8" class="input-btn">
        <input type="button" value="9" class="input-btn">
        <input type="button" value="-" class="input-btn">
        <input type="button" value="6" class="input-btn">
        <input type="button" value="5" class="input-btn">
        <input type="button" value="4" class="input-btn">
        <input type="button" value="+" class="input-btn">

        <input type="button" value="1" class="input-btn">
        <input type="button" value="2" class="input-btn">
        <input type="button" value="3" class="input-btn">

        <input type="button" value="=" id="equal">
        <input type="button" value="0" class="input-btn">
        <input type="button" value="." class="input-btn">
    </div>
</div>

<script>
    let equal_pressed = 0;

    /* All input buttons without AC and DEL */
    let button_input = document.querySelectorAll(".input-btn")

    /* input,equal,clear and erase */
    let input = document.getElementById("input")
    let equal = document.getElementById("equal")
    let clear = document.getElementById("clear")
    let erase = document.getElementById("erase")

    button_input.forEach((btn_class) => {
        btn_class.addEventListener("click",  function () {
            if (equal_pressed == 1) {
                input.value = "";
                equal_pressed = 0;
            }
            /* Display value of user input */
            input.value += btn_class.value;
        });
    });

    equal.addEventListener("click", function () {
       equal_pressed = 1;
       let inp_val = input.value;

       try {
           let solution = eval(inp_val);
           /* True for natural numbers */
           /* False for decimal numbers */
           if (Number.isInteger(solution)){
               input.value = solution;
           } else {
               input.value = solution.toFixed(2);
           }
       }catch (err) {
           alert("Invalid input")
       }
    });

    clear.addEventListener("click", function () {
       input.value = "";
    });

    erase.addEventListener("click" ,function () {
       input.value = input.value.substr(0, input.value.length-1);
    });
</script>
</body>
</html>